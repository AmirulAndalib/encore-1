<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="index.css" type="text/css" rel="stylesheet" />
    <script type="module" src="webui_utils.js"></script>
    <script type="module" src="mmrl_css.js"></script>
  </head>
  <body
    class="bg-blue-background text-white flex justify-center min-h-screen root_layout"
  >
    <main class="p-3 text-sm w-full max-w-2xl">
      <h1 class="text-left text-lg font-semibold mt-2 ml-1 mb-6">
        Encore Tweaks
      </h1>

      <!-- daemon status -->
      <div
        class="bg-blue-secondary mb-4 p-4 rounded-lg flex items-start justify-between"
      >
        <div>
          <span id="daemon_status" class="text-lg font-semibold">Loading</span>
          <span id="daemon_pid" class="text-xs mt-3 block"
            >One moment please...</span
          >
        </div>
        <img id="encore_pics" class="w-24 h-24" />
      </div>

      <!-- device & module info -->
      <div class="bg-blue-container mb-4 p-4 rounded-lg">
        <div class="py-2">
          <h3 class="text-sm font-medium mb-1">Encore Tweaks</h3>
          <span id="module_version" class="text-gray-400 text-xs"></span>
        </div>
        <div class="py-2">
          <h3 class="text-sm font-medium mb-1">Kernel</h3>
          <span id="kernel_version" class="text-gray-400 text-xs"></span>
        </div>
        <div class="py-2">
          <h3 class="text-sm font-medium mb-1">Chipset</h3>
          <span id="chipset_name" class="text-gray-400 text-xs"></span>
        </div>
        <div class="py-2">
          <h3 class="text-sm font-medium mb-1">Android SDK</h3>
          <span id="android_sdk" class="text-gray-400 text-xs"></span>
        </div>
      </div>

      <!-- settings -->
      <div class="bg-blue-container mb-4 p-4 rounded-lg">
        <h2 class="text-base font-semibold mb-2">Settings</h2>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            Kill Logger
            <button
              class="btn btn-circle btn-ghost btn-xs text-blue-primary"
              onclick="kill_logger.showModal()"
            >
              <svg
                tabindex="0"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="h-4 w-4 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
            </button>
          </div>
          <input
            id="kill_logd_switch"
            type="checkbox"
            class="toggle border-blue-primary bg-blue-primary hover:bg-blue-primary"
          />
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2">Default CPU Governor</p>
          <select
            id="default_cpu_gov"
            class="select bg-blue-primary text-xs text-black w-full p-2"
          >
            <option value="schedutil" selected>schedutil</option>
          </select>
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2">Powersave CPU Governor</p>
          <select
            id="powersave_cpu_gov"
            class="select bg-blue-primary text-xs text-black w-full p-2"
          >
            <option value="powersave" selected>powersave</option>
          </select>
        </div>
      </div>

      <!-- actions -->
      <div class="bg-blue-container mb-4 p-4 rounded-lg">
        <h2 class="text-base font-semibold mb-4">Actions</h2>
        <button
          id="edit_gamelist_btn"
          class="btn btn-block bg-blue-primary text-black py-1 mb-2"
          onclick="edit_gamelist.showModal()"
        >
          Edit Gamelist
        </button>
        <button
          id="restart_daemon_btn"
          class="btn btn-block bg-blue-primary text-black py-1 mb-2"
        >
          Restart Daemon
        </button>
        <button
          id="save_log_btn"
          class="btn btn-block bg-blue-primary text-black py-1 mb-2"
        >
          Save Module Logs
        </button>
      </div>

      <!-- modal -->
      <dialog id="kill_logger" class="modal">
        <div class="modal-box bg-blue-container">
          <form method="dialog">
            <button
              class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
              ✕
            </button>
          </form>
          <h3 class="text-lg font-bold">Kill Logger</h3>
          <p class="py-4">
            This option will stop the logger services and silence logs, enabling
            a reduction in performance overhead.
          </p>
          <div role="alert" class="alert bg-blue-primary text-black">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 shrink-0 stroke-current"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              />
            </svg>
            <span
              >WARNING: Software that depends on the logd service will not work
              properly!</span
            >
          </div>
        </div>
      </dialog>

      <dialog id="mmrl_denied" class="modal">
        <div class="modal-box bg-blue-container">
          <form method="dialog">
            <button
              class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
              ✕
            </button>
          </form>
          <h3 class="text-lg font-bold">Permission Denied</h3>
          <p class="py-4">
            Please activate the JavaScript API for Encore Tweaks in MMRL
            settings; this WebUI will not function without it.
          </p>

          <div class="breadcrumbs text-sm">
            <ul>
              <li>Settings</li>
              <li>Security</li>
              <li>Allow JavaScript API</li>
              <li>Encore Tweaks</li>
            </ul>
          </div>
        </div>
      </dialog>

      <dialog id="edit_gamelist" class="modal">
        <div class="modal-box bg-blue-container">
          <form method="dialog">
            <button
              class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
              ✕
            </button>
          </form>
          <h3 class="text-lg font-bold">Edit Gamelist</h3>
          <p class="py-4">
            Any apps and games listed here will trigger performance profile.
          </p>
          <textarea
            id="gamelist_textarea"
            class="w-full p-2 text-sm text-white bg-blue-secondary border-none outline-none shadow-none rounded-md resize-none mb-2"
            rows="14"
          ></textarea>
          <form method="dialog">
            <button
              id="save_gamelist_btn"
              class="btn btn-block btn-sm bg-blue-primary text-black font-normal mb-2"
            >
              Save Changes
            </button>
            <button
              class="btn btn-block btn-sm bg-blue-secondary text-white font-normal"
            >
              Cancel Changes
            </button>
          </form>
        </div>
      </dialog>
    </main>
  </body>
</html>
