const translations = {
  en: {
    moduleTitle: "Encore Tweaks",
    profileTitle: "Current Profile",
    kernelTitle: "Kernel",
    chipsetTitle: "Chipset",
    androidSDKTitle: "Android SDK",
    settingsTitle: "Settings",
    killLogger: "Kill Logger",
    dndGameplay: "DND on Gameplay",
    defaultCpuGov: "Default CPU Governor",
    powersaveCpuGov: "Powersave CPU Governor",
    actionsTitle: "Actions",
    supportTitle: "Support Me",
    supportDescription: "Encore Tweaks is, and always will be, free for you, and everyone. You can however show me that you care by making a donation.",
    killLoggerTitle: "Kill Logger",
    killLoggerDesc: "This option will stop the logger services and silence logs, enabling a reduction in performance overhead.",
    killLoggerWarning: "WARNING: Software that depends on the logd service will not work properly!",
    dndTitle: "Do Not Disturb",
    dndDesc: "Enable do not disturb mode when playing games. Limits interruptions from notifications and calls, allowing you to play your favorite games without any distraction.",
    permissionDeniedTitle: "Permission Denied",
    permissionDeniedDesc: "Please activate the JavaScript API for Encore Tweaks in MMRL settings; this WebUI will not function without it.",
    breadcrumbsSettings: "Settings",
    breadcrumbsModules: "Modules & Permissions",
    breadcrumbsEncore: "Encore Tweaks",
    breadcrumbsAllowAPI: "Allow Advanced KernelSU API",
    editGamelistTitle: "Edit Gamelist",
    editGamelistDesc: "The performance profile will be activated when any of the games and apps listed here are launched.",
    saveChanges: "Save Changes",
    cancelChanges: "Cancel Changes",
    restartDaemon: "Restart Daemon",
    saveLogs: "Save Module Logs"
  },
  es: {
    moduleTitle: "Encore Tweaks",
    profileTitle: "Perfil Actual",
    kernelTitle: "Kernel",
    chipsetTitle: "Procesador",
    androidSDKTitle: "Versión de Android",
    settingsTitle: "Configuración",
    killLogger: "Kill Logger",
    dndGameplay: "Modo no Molestar en Juego",
    defaultCpuGov: "Governor por Defecto",
    powersaveCpuGov: "Governor en Ahorro de Batería",
    actionsTitle: "Funciones",
    supportTitle: "Ayúdame",
    supportDescription: "Encore Tweaks es, y siempre será, gratis para ti, y para todos. Sin embargo, puedes demostrarme que te importo haciendo una donación.",
    killLoggerTitle: "Kill Logger",
    killLoggerDesc: "Esta opción detendrá los servicios de registro y silenciará los registros, lo que permitirá reducir la sobrecarga de rendimiento.",
    killLoggerWarning: "ADVERTENCIA: ¡El software que dependa del servicio logd no funcionará correctamente!",
    dndTitle: "No Molestar",
    dndDesc: "Activa el modo no molestar cuando juegues. Limita las interrupciones de notificaciones y llamadas, lo que te permite jugar a tus juegos favoritos sin ninguna distracción.",
    permissionDeniedTitle: "Permiso Denegado",
    permissionDeniedDesc: "Active la API JavaScript para Encore Tweaks en la configuración MMRL; esta WebUI no funcionará sin ella.",
    breadcrumbsSettings: "Configuración",
    breadcrumbsModules: "Módulos & Permisos",
    breadcrumbsEncore: "Encore Tweaks",
    breadcrumbsAllowAPI: "Permitir API KernelSU Avanzada",
    editGamelistTitle: "Editar Lista de Juegos",
    editGamelistDesc: "El perfil de rendimiento se activará cuando se inicie cualquiera de los juegos y aplicaciones que aparecen en esta lista.",
    saveChanges: "Guardar Cambios",
    cancelChanges: "Cancelar Cambios",
    restartDaemon: "Reiniciar Daemon",
    saveLogs: "Guardar los Registros del Módulo"
  },
  id: {
    moduleTitle: "Encore Tweaks",
    profileTitle: "Profil saat ini",
    kernelTitle: "Kernel",
    chipsetTitle: "Chipset",
    androidSDKTitle: "Android SDK",
    settingsTitle: "Pengaturan",
    killLogger: "Bunuh Log",
    dndGameplay: "Mode Jangan Ganggu",
    defaultCpuGov: "CPU Governor Default",
    powersaveCpuGov: "CPU Governor Hemat Daya",
    actionsTitle: "Aksi",
    supportTitle: "Dukung Saya",
    supportDescription: "Encore Tweaks akan selalu gratis untuk semua orang. Namun Anda dapat menunjukkan kepedulian Anda dengan memberikan donasi.",
    killLoggerTitle: "Bunuh Log",
    killLoggerDesc: "Pilihan ini akan menghentikan layanan pencatat dan membungkam log, sehingga mengurangi overhead kinerja.",
    killLoggerWarning: "PERINGATAN: Perangkat lunak yang bergantung pada layanan logd tidak akan berfungsi dengan baik!",
    dndTitle: "Mode Jangan Ganggu",
    dndDesc: "Aktifkan mode jangan ganggu saat bermain game. Batasi gangguan dari notifikasi dan panggilan, sehingga Anda dapat memainkan game favorit tanpa gangguan apa pun.",
    permissionDeniedTitle: "Izin Ditolak",
    permissionDeniedDesc: "Harap aktifkan JavaScript API untuk Encore Tweaks di pengaturan MMRL; WebUI ini tidak akan berfungsi tanpanya.",
    breadcrumbsSettings: "Pengaturan",
    breadcrumbsModules: "Modul & Perizinan",
    breadcrumbsEncore: "Encore Tweaks",
    breadcrumbsAllowAPI: "Izinkan API KernelSU Lanjutan",
    editGamelistTitle: "Edit Daftar Permainan",
    editGamelistDesc: "Profil kinerja akan diaktifkan ketika salah satu permainan dan aplikasi yang tercantum di sini diluncurkan.",
    saveChanges: "Simpan Perubahan",
    cancelChanges: "Batalkan Perubahan",
    restartDaemon: "Mulai Ulang Daemon",
    saveLogs: "Simpan Log Modul"
  },
  ru: {
    moduleTitle: "Encore Tweaks",
    profileTitle: "Текущий профиль",
    kernelTitle: "Ядро",
    chipsetTitle: "Чипсет",
    androidSDKTitle: "Android SDK",
    settingsTitle: "Настройки",
    killLogger: "Остановить логгер",
    dndGameplay: "Не беспокоить во время игры",
    defaultCpuGov: "CPU Governor по умолчанию",
    powersaveCpuGov: "Энергосберегающий CPU Governor",
    actionsTitle: "Действия",
    supportTitle: "Поддержите меня",
    supportDescription: "Encore Tweaks всегда был и будет бесплатным для вас и для всех. Однако вы можете показать свою поддержку, сделав пожертвование.",
    killLoggerTitle: "Остановить логгер",
    killLoggerDesc: "Эта опция остановит службы логгера и отключит запись логов, что позволит снизить нагрузку на производительность.",
    killLoggerWarning: "ВНИМАНИЕ: Программное обеспечение, зависящее от службы logd, не будет работать должным образом!",
    dndTitle: "Не беспокоить",
    dndDesc: "Включает режим «Не беспокоить» во время игры, что ограничивает прерывания от уведомлений и звонков, позволяя вам наслаждаться любимыми играми без отвлекающих факторов.",
    permissionDeniedTitle: "Доступ запрещен",
    permissionDeniedDesc: "Пожалуйста, активируйте JavaScript API для Encore Tweaks в настройках MMRL; этот веб-интерфейс не будет работать без него.",
    breadcrumbsSettings: "Настройки",
    breadcrumbsModules: "Модули и разрешения",
    breadcrumbsEncore: "Encore Tweaks",
    breadcrumbsAllowAPI: "Разрешить расширенный API KernelSU",
    editGamelistTitle: "Редактировать список игр",
    editGamelistDesc: "Профиль производительности будет активирован при запуске любой из указанных игр и приложений.",
    saveChanges: "Сохранить изменения",
    cancelChanges: "Отменить изменения",
    restartDaemon: "Перезапустить демон",
    saveLogs: "Сохранить логи модуля"
  }
};

/**
 * Function to update the translation of all elements with data-i18n attribute
 * @param {string} lang - language code (e.g., 'en' or 'ru')
 */
function translatePage(lang) {
  // Update the lang attribute in the <html> tag
  document.documentElement.lang = lang;

  // Iterate over all elements with data-i18n and update their content
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      el.innerText = translations[lang][key];
    }
  });

  // Update the text of buttons that may not have data-i18n (if necessary)
  const editGamelistBtn = document.getElementById('edit_gamelist_btn');
  if (editGamelistBtn) editGamelistBtn.innerText = translations[lang]['editGamelistTitle'];

  const restartDaemonBtn = document.getElementById('restart_daemon_btn');
  if (restartDaemonBtn) restartDaemonBtn.innerText = translations[lang]['restartDaemon'];

  const saveLogBtn = document.getElementById('save_log_btn');
  if (saveLogBtn) saveLogBtn.innerText = translations[lang]['saveLogs'];
}

// Determine the default language based on the user's device language
let pageLang = navigator.language.split('-')[0]; // Get the primary language code
if (!translations[pageLang]) {
  pageLang = 'en'; // Fallback to English if the language is not supported
}

// Set the selected language in the language selector
const languageSelector = document.getElementById('languageSelector');
if (languageSelector) {
  languageSelector.value = pageLang;
}

// Apply translation on page load
translatePage(pageLang);

// Handle language change by the user
if (languageSelector) {
  languageSelector.addEventListener('change', (e) => {
    translatePage(e.target.value);
  });
}